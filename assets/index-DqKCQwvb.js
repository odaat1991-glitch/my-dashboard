import{i as ce,g as de,a as xe,r as m,o as ue,q as I,b as V,c as N,d as M,e as D,j as e,P as B,L as he,R as X,A as O,G as me,F as A,M as fe,U as pe,s as ge,f as be,h as je,k as we,l as J,m as Z,n as ve,S as Ne,H as ye,p as ke,t as Ce,T as F,u as Se,v as Y,C as W,D as Te,w as Ae,x as De,V as H,y as ze,z as y,B as P,E as k,I as _,J as Ie}from"./vendor-Djb8fpLH.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();const Q={apiKey:"AIzaSyARypVAjLuFlXSuqU-tYNj2L-dLgLq2H74",authDomain:"productivity-git.firebaseapp.com",projectId:"productivity-git",storageBucket:"productivity-git.firebasestorage.app",messagingSenderId:"874339373522",appId:"1:874339373522:web:939bfa39737dc81fcd380b",measurementId:"G-RWZJGDK0V9"},b=(Q.appId||"default-app").replace(/[^a-zA-Z0-9_-]/g,"_"),ee=ce(Q),$=de(ee),j=xe(ee),K=(n=.5,r="complete")=>{if(!(n<=0))try{const s=window.AudioContext||window.webkitAudioContext;if(!s)return;const t=new s,i=t.createOscillator(),c=t.createGain();i.connect(c),c.connect(t.destination),r==="complete"?(i.type="triangle",i.frequency.setValueAtTime(523.25,t.currentTime),i.frequency.linearRampToValueAtTime(659.25,t.currentTime+.1),i.frequency.linearRampToValueAtTime(783.99,t.currentTime+.2),i.frequency.linearRampToValueAtTime(1046.5,t.currentTime+.3),c.gain.setValueAtTime(n,t.currentTime),c.gain.exponentialRampToValueAtTime(.01,t.currentTime+.6),i.start(t.currentTime),i.stop(t.currentTime+.6)):(i.type="sine",i.frequency.setValueAtTime(880,t.currentTime),c.gain.setValueAtTime(n*.5,t.currentTime),c.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),i.start(t.currentTime),i.stop(t.currentTime+.1))}catch(s){console.error("Audio play failed",s)}};class Me{constructor(){this.ctx=null,this.nodes={},this.intervals={},this.volumes={}}init(){if(this.ctx)return;const r=window.AudioContext||window.webkitAudioContext;this.ctx=new r}createNoise(r){this.ctx||this.init();const s=2*this.ctx.sampleRate,t=this.ctx.createBuffer(1,s,this.ctx.sampleRate),i=t.getChannelData(0);for(let l=0;l<s;l++){const h=Math.random()*2-1;if(r==="white")i[l]=h;else if(r==="pink"){const a=[0,0,0,0,0,0,0];a[0]=.99886*a[0]+h*.0555179,a[1]=.99332*a[1]+h*.0750759,a[2]=.969*a[2]+h*.153852,a[3]=.8665*a[3]+h*.3104856,a[4]=.55*a[4]+h*.5329522,a[5]=-.7616*a[5]-h*.016898,i[l]=a[0]+a[1]+a[2]+a[3]+a[4]+a[5]+h*.5362,i[l]*=.11}else if(r==="brown"){const a=l>0?i[l-1]:0;i[l]=(a+.02*h)/1.02,i[l]*=3.5}}const c=this.ctx.createBufferSource();return c.buffer=t,c.loop=!0,c}playChime(r){if(!this.ctx||r<=0)return;const s=this.ctx.createOscillator(),t=this.ctx.createGain(),i=[1046.5,1174.66,1318.51,1567.98,1760],c=i[Math.floor(Math.random()*i.length)];s.frequency.value=c,s.type="sine",s.connect(t),t.connect(this.ctx.destination);const l=this.ctx.currentTime;t.gain.setValueAtTime(0,l),t.gain.linearRampToValueAtTime(r*.3,l+.05),t.gain.exponentialRampToValueAtTime(.001,l+3),s.start(l),s.stop(l+3.5),setTimeout(()=>{s.disconnect(),t.disconnect()},4e3)}toggle(r,s){if(this.volumes[r]=s,r==="chimes"){this.intervals.chimes&&(clearInterval(this.intervals.chimes),delete this.intervals.chimes),s>0&&(this.init(),this.ctx.state==="suspended"&&this.ctx.resume(),this.intervals.chimes=setInterval(()=>{Math.random()<.3&&this.playChime(this.volumes.chimes)},2e3),this.playChime(s));return}if(this.nodes[r]){try{this.nodes[r].source.stop(),this.nodes[r].gain.disconnect()}catch{}delete this.nodes[r]}if(s>0){this.init(),this.ctx.state==="suspended"&&this.ctx.resume();const t=this.createNoise(r),i=this.ctx.createGain();i.gain.value=s,t.connect(i),i.connect(this.ctx.destination),t.start(),this.nodes[r]={source:t,gain:i}}}setVolume(r,s){if(this.volumes[r]=s,r==="chimes"){s<=0&&this.intervals.chimes?(clearInterval(this.intervals.chimes),delete this.intervals.chimes):s>0&&!this.intervals.chimes&&this.toggle("chimes",s);return}this.nodes[r]?this.nodes[r].gain.gain.linearRampToValueAtTime(s,this.ctx.currentTime+.1):s>0&&this.toggle(r,s)}stopAll(){Object.keys(this.nodes).forEach(r=>{try{this.nodes[r].source.stop()}catch{}}),Object.keys(this.intervals).forEach(r=>{clearInterval(this.intervals[r])}),this.nodes={},this.intervals={},this.ctx&&this.ctx.close(),this.ctx=null}}const G=new Me,Re=({isActive:n})=>{const r=m.useRef(null);return m.useEffect(()=>{if(!n)return;const s=r.current,t=s.getContext("2d");s.width=window.innerWidth,s.height=window.innerHeight;const i=[],c=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6"];for(let h=0;h<150;h++)i.push({x:s.width/2,y:s.height/2,vx:(Math.random()-.5)*20,vy:(Math.random()-.5)*20,size:Math.random()*8+2,color:c[Math.floor(Math.random()*c.length)],gravity:.5,drag:.96,life:100});const l=()=>{t.clearRect(0,0,s.width,s.height);let h=!1;i.forEach(a=>{a.life>0&&(h=!0,a.x+=a.vx,a.y+=a.vy,a.vy+=a.gravity,a.vx*=a.drag,a.vy*=a.drag,a.life--,t.fillStyle=a.color,t.beginPath(),t.arc(a.x,a.y,a.size,0,Math.PI*2),t.fill())}),h&&requestAnimationFrame(l)};l()},[n]),n?e.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-50"}):null},Ee=({timeLeft:n,isActive:r,mode:s,toggleTimer:t,onExpand:i})=>{const c=l=>{const h=Math.floor(l/60),a=l%60;return`${h.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"fixed bottom-6 right-6 bg-white p-3 pr-5 rounded-2xl shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200 flex items-center gap-4 z-50 animate-bounce-in",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center cursor-pointer transition-colors ${s==="work"?"bg-indigo-100 text-indigo-600":"bg-teal-100 text-teal-600"}`,onClick:t,children:r?e.jsx(J,{size:18,fill:"currentColor"}):e.jsx(Z,{size:18,fill:"currentColor"})}),e.jsxs("div",{className:"flex flex-col cursor-pointer",onClick:i,children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider leading-none mb-1",children:s}),e.jsx("span",{className:"text-xl font-mono font-bold text-slate-700 leading-none",children:c(n)})]}),e.jsx("button",{onClick:i,className:"p-2 text-slate-300 hover:text-slate-500 hover:bg-slate-50 rounded-lg transition-colors",children:e.jsx(ve,{size:16})})]})},$e=({timeLeft:n,isActive:r,mode:s,toggleTimer:t,resetTimer:i,switchMode:c,volume:l,setVolume:h,dailyCount:a})=>{const d=v=>{const S=Math.floor(v/60),R=v%60;return`${S.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`},x=s==="work"?1500:300,o=(x-n)/x*100,u=120,p=2*Math.PI*u,C=p-o/100*p;return e.jsx("div",{className:"flex flex-col items-center justify-center h-full w-full max-w-3xl mx-auto animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full",children:[e.jsxs("div",{className:"md:col-span-2 bg-white rounded-3xl shadow-sm border border-slate-100 p-8 flex flex-col items-center relative overflow-hidden",children:[e.jsxs("div",{className:"flex space-x-2 bg-slate-50 p-1.5 rounded-xl mb-8 relative z-10",children:[e.jsx("button",{onClick:()=>c("work"),className:`px-6 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${s==="work"?"bg-white text-indigo-600 shadow-sm scale-105":"text-slate-400 hover:text-slate-600"}`,children:"Deep Work"}),e.jsx("button",{onClick:()=>c("break"),className:`px-6 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${s==="break"?"bg-white text-teal-600 shadow-sm scale-105":"text-slate-400 hover:text-slate-600"}`,children:"Rest"})]}),e.jsxs("div",{className:"relative mb-8 group cursor-default",children:[e.jsxs("svg",{className:"transform -rotate-90 w-80 h-80",children:[e.jsx("circle",{cx:"160",cy:"160",r:u,stroke:"currentColor",strokeWidth:"12",fill:"transparent",className:"text-slate-50"}),e.jsx("circle",{cx:"160",cy:"160",r:u,stroke:"currentColor",strokeWidth:"12",fill:"transparent",strokeDasharray:p,strokeDashoffset:C,strokeLinecap:"round",className:`transition-all duration-1000 ease-linear ${s==="work"?"text-indigo-500":"text-teal-500"}`})]}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center",children:[e.jsx("div",{className:`text-6xl font-mono font-bold tracking-tighter ${s==="work"?"text-indigo-900":"text-teal-900"}`,children:d(n)}),e.jsx("div",{className:"text-slate-400 text-sm font-medium mt-2 tracking-widest uppercase",children:r?"Focusing":"Paused"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6 relative z-10",children:[e.jsx("button",{onClick:i,className:"p-4 rounded-2xl bg-slate-50 text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",children:e.jsx(X,{size:24})}),e.jsx("button",{onClick:t,className:`p-6 rounded-3xl transition-all duration-300 transform hover:scale-105 active:scale-95 shadow-xl hover:shadow-2xl ${r?"bg-amber-50 text-amber-500 hover:bg-amber-100 ring-4 ring-amber-50":s==="work"?"bg-indigo-600 text-white hover:bg-indigo-700 ring-4 ring-indigo-50":"bg-teal-500 text-white hover:bg-teal-600 ring-4 ring-teal-50"}`,children:r?e.jsx(J,{size:36,fill:"currentColor"}):e.jsx(Z,{size:36,fill:"currentColor",className:"ml-1"})})]})]}),e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(Ae,{size:120})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h3",{className:"text-indigo-100 font-medium mb-1 flex items-center gap-2",children:[e.jsx(De,{size:18})," Daily Focus"]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-5xl font-bold",children:a}),e.jsx("span",{className:"text-indigo-200 text-sm font-medium",children:"sessions"})]}),e.jsx("div",{className:"mt-4 bg-white/20 h-2 rounded-full overflow-hidden backdrop-blur-sm",children:e.jsx("div",{className:"h-full bg-white/90 rounded-full transition-all duration-1000",style:{width:`${Math.min(a/8*100,100)}%`}})}),e.jsx("p",{className:"text-xs text-indigo-200 mt-2",children:"Goal: 8 sessions / day"})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-slate-100 flex-1",children:[e.jsxs("h3",{className:"text-slate-500 font-medium mb-4 flex items-center gap-2",children:[e.jsx(H,{size:18})," Soundscape"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-slate-400",children:[e.jsx(ze,{size:18}),e.jsx(H,{size:18})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:l,onChange:v=>h(parseFloat(v.target.value)),className:"w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer accent-indigo-500 hover:accent-indigo-600"}),e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"Adjust notification volume"})]})]})]})]})})},L=({title:n,status:r,tasks:s,user:t,onDrop:i,onDragStart:c})=>{const l=f=>f.preventDefault(),h={todo:"border-blue-500",doing:"border-amber-500",done:"border-emerald-500"}[r]||"border-slate-300",a={todo:"bg-blue-50",doing:"bg-amber-50",done:"bg-emerald-50"}[r]||"bg-slate-50",g={todo:"text-blue-700",doing:"text-amber-700",done:"text-emerald-700"}[r]||"text-slate-700";return e.jsxs("div",{className:`flex-1 bg-slate-50/50 rounded-xl flex flex-col min-h-[500px] border-t-4 ${h} shadow-[0_8px_30px_rgb(0,0,0,0.04)]`,onDragOver:l,onDrop:f=>i(f,r),children:[e.jsxs("div",{className:`p-4 rounded-t-sm ${a} flex items-center justify-between border-b border-slate-200/50`,children:[e.jsx("h3",{className:`font-bold ${g} uppercase tracking-wide text-sm`,children:n}),e.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-slate-500 text-xs font-bold px-2.5 py-1 rounded-full shadow-sm",children:s.length})]}),e.jsx("div",{className:"p-3 space-y-3 overflow-y-auto flex-1",children:s.map(f=>e.jsxs("div",{draggable:!0,onDragStart:d=>c(d,f.id),className:"bg-white p-4 rounded-lg shadow-sm border border-slate-200 cursor-move hover:shadow-lg hover:-translate-y-1 transition-all duration-200 group relative",children:[e.jsx("p",{className:"text-slate-700 font-medium text-sm leading-relaxed",children:f.content}),e.jsx("div",{className:"flex justify-end mt-3 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>_(k(j,"artifacts",b,"users",t.uid,"kanban",f.id)),className:"p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded transition-colors",children:e.jsx(F,{size:14})})})]},f.id))})]})},Le=({user:n})=>{const[r,s]=m.useState([]),[t,i]=m.useState("");m.useEffect(()=>{if(!n)return;const a=I(N(j,"artifacts",b,"users",n.uid,"kanban"));return M(a,g=>s(g.docs.map(f=>({id:f.id,...f.data()}))),g=>console.error("Kanban error",g))},[n]);const c=async a=>{a.preventDefault(),t.trim()&&(await D(N(j,"artifacts",b,"users",n.uid,"kanban"),{content:t,status:"todo",createdAt:y()}),i(""))},l=(a,g)=>a.dataTransfer.setData("taskId",g),h=async(a,g)=>{const f=a.dataTransfer.getData("taskId");f&&await P(k(j,"artifacts",b,"users",n.uid,"kanban",f),{status:g})};return e.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:e.jsxs("form",{onSubmit:c,className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Y,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:t,onChange:a=>i(a.target.value),placeholder:"Add a new task...",className:"w-full pl-10 pr-4 py-2 bg-slate-50 rounded-lg border-transparent focus:bg-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all text-slate-700"})]}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 font-medium shadow-sm transition-all hover:shadow-md",children:"Add Task"})]})}),e.jsxs("div",{className:"flex-1 flex gap-6 overflow-x-auto pb-4 px-1",children:[e.jsx(L,{title:"To Do",status:"todo",tasks:r.filter(a=>a.status==="todo"),user:n,onDrop:h,onDragStart:l}),e.jsx(L,{title:"In Progress",status:"doing",tasks:r.filter(a=>a.status==="doing"),user:n,onDrop:h,onDragStart:l}),e.jsx(L,{title:"Done",status:"done",tasks:r.filter(a=>a.status==="done"),user:n,onDrop:h,onDragStart:l})]})]})},Oe=({user:n})=>{const[r,s]=m.useState([]),[t,i]=m.useState(null),c=m.useRef(null);m.useEffect(()=>{if(!n)return;const o=I(N(j,"artifacts",b,"users",n.uid,"notes"),V("updatedAt","desc"));return M(o,u=>s(u.docs.map(p=>({id:p.id,...p.data()}))))},[n]);const l=r.find(o=>o.id===t)||{title:"",content:"",isCode:!1},h=async()=>{const o=await D(N(j,"artifacts",b,"users",n.uid,"notes"),{title:"",content:"",isCode:!1,updatedAt:y()});i(o.id)},a=async(o,u)=>{t&&await P(k(j,"artifacts",b,"users",n.uid,"notes",t),{[o]:u,updatedAt:y()})},g=async(o,u)=>{u.stopPropagation(),await _(k(j,"artifacts",b,"users",n.uid,"notes",o)),t===o&&i(null)},f=()=>{if(!t)return;const o=document.createElement("a"),u=new Blob([l.content],{type:"text/markdown"});o.href=URL.createObjectURL(u),o.download=`${l.title||"untitled"}.md`,document.body.appendChild(o),o.click(),document.body.removeChild(o)},d=()=>c.current.click(),x=async o=>{const u=o.target.files[0];if(!u)return;const p=new FileReader;p.onload=async C=>{const v=C.target.result,S=u.name.replace(".md","").replace(".txt","");await D(N(j,"artifacts",b,"users",n.uid,"notes"),{title:S,content:v,isCode:!1,updatedAt:y()})},p.readAsText(u),o.target.value=null};return e.jsxs("div",{className:"h-full flex bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"w-64 bg-slate-50 border-r border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center bg-white",children:[e.jsxs("h2",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx(A,{size:18,className:"text-indigo-500"})," Library"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"file",ref:c,onChange:x,className:"hidden",accept:".md,.txt"}),e.jsx("button",{onClick:d,className:"p-1.5 hover:bg-slate-100 rounded-md text-slate-500 hover:text-indigo-600 transition-colors",title:"Import Markdown",children:e.jsx(Se,{size:16})}),e.jsx("button",{onClick:h,className:"p-1.5 hover:bg-slate-100 rounded-md text-slate-500 hover:text-indigo-600 transition-colors",children:e.jsx(Y,{size:16})})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:r.map(o=>e.jsxs("div",{onClick:()=>i(o.id),className:`p-3 rounded-lg cursor-pointer group transition-all ${t===o.id?"bg-white text-indigo-600 shadow-sm ring-1 ring-slate-200":"text-slate-600 hover:bg-white hover:shadow-sm"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:`font-medium truncate text-sm ${o.title?"":"italic opacity-50"}`,children:o.title||"Untitled Note"}),e.jsx("button",{onClick:u=>g(o.id,u),className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-red-500 transition-opacity",children:e.jsx(F,{size:14})})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1 flex items-center gap-1",children:[o.isCode?e.jsx(W,{size:10}):e.jsx(A,{size:10}),new Date(o.updatedAt?.seconds*1e3||Date.now()).toLocaleDateString()]})]},o.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col h-full bg-white",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-8 py-4 border-b border-slate-100 flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 mr-4",children:e.jsx("input",{value:l.title,onChange:o=>a("title",o.target.value),className:"text-xl font-bold text-slate-800 outline-none w-full bg-transparent placeholder:text-slate-300",placeholder:"Untitled Note"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 rounded transition-colors",title:"Export to Markdown",children:e.jsx(Te,{size:18})}),e.jsx("div",{className:"h-4 w-px bg-slate-200 mx-1"}),e.jsx("button",{onClick:()=>a("isCode",!l.isCode),className:`px-3 py-1.5 rounded-lg flex items-center gap-2 text-xs font-bold tracking-wide transition-colors ${l.isCode?"bg-slate-800 text-green-400":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:l.isCode?e.jsxs(e.Fragment,{children:[e.jsx(W,{size:14})," CODE"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:14})," TEXT"]})})]})]}),e.jsx("textarea",{className:`flex-1 w-full p-8 outline-none resize-none leading-relaxed text-base ${l.isCode?"font-mono bg-[#1e1e1e] text-[#d4d4d4]":"bg-white text-slate-600 selection:bg-indigo-100"}`,value:l.content,onChange:o=>a("content",o.target.value),placeholder:l.isCode?"// Type code snippet here...":"Start writing...",spellCheck:!l.isCode})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:e.jsx(A,{size:40})}),e.jsx("p",{className:"font-medium",children:"Select a note to view details"})]})})]})},Ve=({user:n})=>{const[r,s]=m.useState([]),[t,i]=m.useState(""),c=m.useMemo(()=>{const d=[];for(let x=6;x>=0;x--){const o=new Date;o.setDate(o.getDate()-x),d.push(o.toISOString().split("T")[0])}return d},[]);m.useEffect(()=>{if(!n)return;const d=I(N(j,"artifacts",b,"users",n.uid,"habits"),V("createdAt","desc"));return M(d,x=>s(x.docs.map(o=>({id:o.id,...o.data()}))))},[n]);const l=async d=>{d.preventDefault(),t.trim()&&(await D(N(j,"artifacts",b,"users",n.uid,"habits"),{name:t,history:{},createdAt:y()}),i(""))},h=async(d,x)=>{const o={...d.history};o[x]?delete o[x]:o[x]=!0,await P(k(j,"artifacts",b,"users",n.uid,"habits",d.id),{history:o})},a=async d=>{window.confirm("Stop tracking this habit?")&&await _(k(j,"artifacts",b,"users",n.uid,"habits",d))},g=d=>{let x=0;const o=new Date;let u=new Date(o),p=u.toISOString().split("T")[0];if(!d[p]&&(u.setDate(u.getDate()-1),p=u.toISOString().split("T")[0],!d[p]))return 0;for(;p=u.toISOString().split("T")[0],d[p];)x++,u.setDate(u.getDate()-1);return x},f=d=>{let x=0;return c.forEach(o=>{d[o]&&x++}),x/7*100};return e.jsxs("div",{className:"flex flex-col h-full space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:e.jsx(O,{size:24})}),e.jsxs("form",{onSubmit:l,className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:d=>i(d.target.value),placeholder:"What habit do you want to build?",className:"flex-1 px-4 py-2 bg-transparent outline-none text-lg text-slate-700 placeholder:text-slate-300"}),e.jsx("button",{type:"submit",className:"bg-slate-900 text-white px-6 py-2 rounded-xl hover:bg-slate-800 font-medium transition-colors",children:"Add Habit"})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full min-w-[800px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50 border-b border-slate-100",children:[e.jsx("th",{className:"text-left p-6 text-sm font-bold text-slate-400 uppercase tracking-wider w-1/3",children:"Habit"}),e.jsx("th",{className:"text-left p-6 text-sm font-bold text-slate-400 uppercase tracking-wider w-32",children:"Streak"}),c.map(d=>{const x=new Date(d),o=new Date().toDateString()===x.toDateString();return e.jsx("th",{className:"p-4 text-center w-16",children:e.jsxs("div",{className:`flex flex-col items-center justify-center w-10 h-10 rounded-lg ${o?"bg-indigo-600 text-white shadow-md":""}`,children:[e.jsx("span",{className:`text-[10px] font-bold uppercase ${o?"text-indigo-200":"text-slate-400"}`,children:x.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("span",{className:`text-sm font-bold ${o?"text-white":"text-slate-600"}`,children:x.getDate()})]})},d)}),e.jsx("th",{className:"w-16"})]})}),e.jsxs("tbody",{children:[r.map(d=>{const x=g(d.history),o=f(d.history);return e.jsxs("tr",{className:"border-b border-slate-50 hover:bg-slate-50/80 transition-colors group",children:[e.jsxs("td",{className:"p-6",children:[e.jsx("div",{className:"font-semibold text-slate-700 text-lg",children:d.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:"h-1.5 w-24 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-xs text-slate-400",children:[Math.round(o),"% weekly"]})]})]}),e.jsx("td",{className:"p-6",children:e.jsxs("div",{className:`flex items-center gap-2 font-bold ${x>2?"text-orange-500":"text-slate-400"}`,children:[e.jsx(ke,{size:20,className:`${x>2?"fill-orange-500 animate-pulse":""}`}),x," days"]})}),c.map(u=>{const p=d.history?.[u];return e.jsx("td",{className:"p-2 text-center",children:e.jsx("button",{onClick:()=>h(d,u),className:`w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 ${p?"bg-emerald-500 text-white shadow-lg shadow-emerald-200 scale-105":"bg-slate-100 text-slate-300 hover:bg-slate-200 hover:scale-105"}`,children:p?e.jsx(Ce,{size:20}):e.jsx("div",{className:"w-3 h-3 rounded-sm bg-slate-300/50"})})},u)}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("button",{onClick:()=>a(d.id),className:"p-2 text-slate-300 hover:text-red-400 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(F,{size:18})})})]},d.id)}),r.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"p-12 text-center text-slate-400",children:[e.jsx(O,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No habits tracked yet. Start your journey today!"})]})})]})]})})})]})},Fe=()=>{const[n,r]=m.useState({pink:0,brown:0,white:0,chimes:0});m.useEffect(()=>()=>G.stopAll(),[]);const s=(t,i)=>{const c={...n,[t]:i};r(c),G.setVolume(t,i)};return e.jsxs("div",{className:"h-full grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-100 p-8 flex flex-col",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx(Ne,{size:24,className:"text-indigo-600"})," Ambient Mixer"]}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Mix your own soundscape using generated noise colors."})]}),e.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-400"})," Rain (Pink Noise)"]}),e.jsxs("span",{className:"text-slate-400 font-mono text-sm",children:[Math.round(n.pink*100),"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:n.pink,onChange:t=>s("pink",parseFloat(t.target.value)),className:"w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-pink-500"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400"})," Wind Chimes"]}),e.jsxs("span",{className:"text-slate-400 font-mono text-sm",children:[Math.round(n.chimes*100),"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:n.chimes,onChange:t=>s("chimes",parseFloat(t.target.value)),className:"w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-indigo-500"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-700"})," River (Brown Noise)"]}),e.jsxs("span",{className:"text-slate-400 font-mono text-sm",children:[Math.round(n.brown*100),"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:n.brown,onChange:t=>s("brown",parseFloat(t.target.value)),className:"w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-amber-700"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400"})," Static (White Noise)"]}),e.jsxs("span",{className:"text-slate-400 font-mono text-sm",children:[Math.round(n.white*100),"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"0.1",step:"0.01",value:n.white,onChange:t=>s("white",parseFloat(t.target.value)),className:"w-full h-2 bg-slate-200 rounded-full appearance-none cursor-pointer accent-slate-400"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"bg-black rounded-3xl shadow-xl overflow-hidden relative group h-[400px] border border-white/10",children:e.jsx("iframe",{width:"100%",height:"100%",scrolling:"no",frameBorder:"no",allow:"autoplay",src:`https://w.soundcloud.com/player/?url=${encodeURIComponent("https://soundcloud.com/chillhopdotcom/sets/lofihiphop")}&color=%236366f1&auto_play=false&hide_related=false&show_comments=false&show_user=true&show_reposts=false&show_teaser=true&visual=true`,className:"h-full w-full",title:"Chillhop SoundCloud"})}),e.jsxs("div",{className:"bg-indigo-600 rounded-3xl p-8 text-white shadow-lg flex-1 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsxs("svg",{width:"100%",height:"100%",children:[e.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"white",strokeWidth:"1"})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(ye,{size:48,className:"mb-4 mx-auto opacity-80"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Focus Mode Active"}),e.jsx("p",{className:"text-indigo-200 max-w-xs mx-auto",children:"Combine the ambient noise on the left with the music above for deep focus."})]})]})]})]})},Pe=()=>{const[n,r]=m.useState(null),[s,t]=m.useState("pomodoro"),[i,c]=m.useState(!0),l=1500,h=300,[a,g]=m.useState(l),[f,d]=m.useState(!1),[x,o]=m.useState("work"),[u,p]=m.useState(.5),[C,v]=m.useState(!1),[S,R]=m.useState(0);m.useEffect(()=>ue($,z=>{r(z),c(!1)}),[]);const te=async()=>{try{const w=new je;await we($,w)}catch(w){console.error("Login failed",w)}};m.useEffect(()=>{if(!n)return;const w=I(N(j,"artifacts",b,"users",n.uid,"pomodoro_sessions"),V("completedAt","desc"));return M(w,E=>{const re=new Date().toDateString(),oe=E.docs.filter(le=>{const U=le.data().completedAt?.toDate();return U&&U.toDateString()===re}).length;R(oe)},E=>console.error("Error fetching pomodoro sessions:",E))},[n]),m.useEffect(()=>{let w=null;return f&&a>0?w=setInterval(()=>g(z=>z-1),1e3):a===0&&f&&se(),()=>clearInterval(w)},[f,a]);const se=async()=>{d(!1),K(u,"complete"),x==="work"&&(v(!0),setTimeout(()=>v(!1),3e3),n&&await D(N(j,"artifacts",b,"users",n.uid,"pomodoro_sessions"),{completedAt:y(),duration:25,mode:"work"}))},q=()=>{f||K(u,"click"),d(!f)},ae=()=>{d(!1),g(x==="work"?l:h)},ie=w=>{o(w),d(!1),g(w==="work"?l:h)};if(i)return e.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-slate-50 text-slate-400 space-y-4",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"font-medium animate-pulse",children:"Loading your workspace..."})]});if(!n)return e.jsx("div",{className:"h-screen flex flex-col items-center justify-center bg-slate-50",children:e.jsxs("div",{className:"text-center space-y-6 p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center mx-auto shadow-lg text-white mb-4",children:e.jsx(B,{size:32})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Welcome Back"}),e.jsx("p",{className:"text-slate-500 max-w-xs mx-auto",children:"Sign in to access your dashboard, tasks, and habits."}),e.jsxs("button",{onClick:te,className:"flex items-center justify-center gap-3 px-8 py-3 bg-white border border-slate-200 rounded-xl shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5 text-slate-700 font-medium w-full max-w-xs mx-auto",children:[e.jsx(he,{size:20,className:"text-indigo-600"}),"Sign in with Google"]})]})});const ne=()=>{switch(s){case"pomodoro":return e.jsx($e,{timeLeft:a,isActive:f,mode:x,toggleTimer:q,resetTimer:ae,switchMode:ie,volume:u,setVolume:p,dailyCount:S});case"kanban":return e.jsx(Le,{user:n});case"notes":return e.jsx(Oe,{user:n});case"habits":return e.jsx(Ve,{user:n});case"sounds":return e.jsx(Fe,{});default:return null}};return e.jsxs("div",{className:"flex h-screen bg-[#f8fafc] font-sans text-slate-900 overflow-hidden selection:bg-indigo-100 selection:text-indigo-900",children:[e.jsx(Re,{isActive:C}),e.jsxs("div",{className:"w-24 bg-white flex flex-col items-center py-8 space-y-8 shadow-2xl z-20 border-r border-slate-100",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-600 to-violet-600 rounded-2xl text-white shadow-lg shadow-indigo-200",children:e.jsx(B,{size:28})}),e.jsxs("nav",{className:"flex-1 flex flex-col gap-6 w-full px-3",children:[e.jsx(T,{icon:X,label:"Focus",active:s==="pomodoro",onClick:()=>t("pomodoro")}),e.jsx(T,{icon:O,label:"Habits",active:s==="habits",onClick:()=>t("habits")}),e.jsx(T,{icon:me,label:"Kanban",active:s==="kanban",onClick:()=>t("kanban")}),e.jsx(T,{icon:A,label:"Notes",active:s==="notes",onClick:()=>t("notes")}),e.jsx(T,{icon:fe,label:"Sounds",active:s==="sounds",onClick:()=>t("sounds")})]}),e.jsx("div",{className:"mt-auto mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-400 hover:text-indigo-600 transition-colors cursor-pointer shadow-sm overflow-hidden",title:`User: ${n.email}`,children:n.photoURL?e.jsx("img",{src:n.photoURL,alt:"User",className:"w-full h-full object-cover"}):e.jsx(pe,{size:20})})}),e.jsx("button",{onClick:()=>ge($),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Sign Out",children:e.jsx(be,{size:20})})]}),e.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden bg-slate-50/50",children:[e.jsxs("header",{className:"h-20 bg-white/80 backdrop-blur-md border-b border-slate-200/60 flex items-center px-10 justify-between sticky top-0 z-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 capitalize tracking-tight",children:s==="sounds"?"Focus Sounds":s}),e.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:" Productivity Dashboard v2.1"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-semibold bg-slate-100 px-3 py-1.5 rounded-full text-slate-500",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"Syncing to Cloud"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-8 scroll-smooth",children:e.jsx("div",{className:"max-w-7xl mx-auto h-full",children:ne()})}),s!=="pomodoro"&&e.jsx(Ee,{timeLeft:a,isActive:f,mode:x,toggleTimer:q,onExpand:()=>t("pomodoro")})]})]})},T=({icon:n,label:r,active:s,onClick:t})=>e.jsxs("button",{onClick:t,className:`w-full aspect-square flex flex-col items-center justify-center rounded-2xl transition-all duration-300 group relative ${s?"bg-indigo-50 text-indigo-600 shadow-inner":"text-slate-400 hover:bg-white hover:shadow-md hover:text-slate-600 hover:-translate-y-0.5"}`,children:[e.jsx(n,{size:26,className:`mb-1 transition-transform duration-300 ${s?"scale-110":"group-hover:scale-110"}`,strokeWidth:s?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold tracking-wide absolute -bottom-8 opacity-0 group-hover:opacity-100 transition-all bg-slate-800 text-white px-2 py-1 rounded-lg z-50 pointer-events-none shadow-xl translate-y-2 group-hover:translate-y-0",children:r})]});Ie.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(Pe,{})}));
